// src/data/CardDatabase.js
// Base de donn√©es compl√®te des 68 cartes, avec co√ªts ET nombre de cartes.

class CardDatabase {
  constructor() {
    // Co√ªts d'am√©lioration par raret√©
    this.upgradeCosts = {
      basic: [20, 50, 150, 400, 1000],
      common: [30, 80, 200, 500, 1200],
      rare: [100, 300, 800, 2000],
      epic: [400, 1200, 3000],
      legendary: [2000, 10000],
      mythic: [5000],
    };

    // Nombre de cartes requises pour am√©liorer
    this.upgradeCardCounts = {
      basic: [2, 5, 10, 20, 50],
      common: [2, 5, 10, 20, 50],
      rare: [1, 2, 4, 10],
      epic: [1, 2, 4],
      legendary: [1, 2],
      mythic: [1],
    };

    this.cards = [
      // --- CARTES BLANCHES (BASIQUES) ---
      {
        id: 'card_b_001',
        name: 'Tridentier',
        type: 'unit',
        cost: 2,
        rarity: 'basic',
        element: 'water',
        icon: 'üî±',
        description: "Un soldat aquatique basique. Sa l√©g√®re port√©e lui permet d'attaquer derri√®re les tanks.",
        stats: { health: 300, attack: 70, attackSpeed: 0.9, speed: 1.5, range: 1.5 },
      },
      {
        id: 'card_b_002',
        name: 'Soldat du Brasier',
        type: 'unit',
        cost: 2,
        rarity: 'basic',
        element: 'fire',
        icon: 'üî•',
        description: 'Une unit√© de m√™l√©e de base, efficace pour son co√ªt.',
        stats: { health: 300, attack: 70, attackSpeed: 0.9, speed: 1.5, range: 1 },
      },
      {
        id: 'card_b_003',
        name: 'Poussin Rapace',
        type: 'unit',
        cost: 1,
        rarity: 'basic',
        element: 'air',
        icon: 'üê§',
        description: 'Une unit√© volante tr√®s rapide et peu co√ªteuse, parfaite pour la distraction, mais extr√™mement fragile.',
        stats: { health: 50, attack: 30, attackSpeed: 1.0, speed: 3.0, range: 1, isFlying: true },
      },
      {
        id: 'card_b_004',
        name: 'Golem d\'Argile',
        type: 'unit',
        cost: 3,
        rarity: 'basic',
        element: 'earth',
        icon: 'üß±',
        description: "Une unit√© de m√™l√©e lente et basique avec des points de vie corrects. Cible les b‚Äötiments en priorit√©.",
        stats: { health: 600, attack: 50, attackSpeed: 2.0, speed: 1.0, range: 1, targetPriority: 'towers' },
      },
      {
        id: 'card_b_005',
        name: 'Flamm√®che',
        type: 'spell',
        cost: 1,
        rarity: 'basic',
        element: 'fire',
        icon: '‚ú®',
        description: 'Lance une petite boule de feu qui inflige des d√©g√¢ts mod√©r√©s √† une cible unique.',
        effect: { type: 'damage', value: 100, radius: 1 },
      },
      {
        id: 'card_b_006',
        name: 'Brise L√©g√®re',
        type: 'spell',
        cost: 1,
        rarity: 'basic',
        element: 'air',
        icon: 'üçÉ',
        description: 'Cr√©e une petite bourrasque qui repousse l√©g√®rement toutes les unit√©es ennemies dans une petite zone, sans infliger de d√©g√¢ts.',
        effect: { type: 'knockback', value: 1, radius: 2.5 },
      },
      {
        id: 'card_b_007',
        name: 'Mur de Terre',
        type: 'building',
        cost: 2,
        rarity: 'basic',
        element: 'earth',
        icon: 'üåÑ',
        description: "Un petit mur d√©fensif qui bloque les unit√©s terrestres pendant un court instant. Se d√©grade rapidement.",
        stats: { health: 400, attack: 0, attackSpeed: 0, speed: 0, range: 0, duration: 30 },
      },
      {
        id: 'card_b_008',
        name: '√âtincelle Pure',
        type: 'spell',
        cost: 1,
        rarity: 'basic',
        element: 'omni',
        icon: 'üí´',
        description: 'Un sort de d√©g√¢t direct faible mais fiable. Ne peut pas √™tre r√©sist√©.',
        effect: { type: 'damage', value: 50, radius: 0.5 },
      },
      
      // --- CARTES VERTES (COMMUNES) ---
      {
        id: 'card_c_001',
        name: 'Gu√©risseur Novice',
        type: 'unit',
        cost: 3,
        rarity: 'common',
        element: 'water',
        icon: 'ü©π',
        description: "Une unit√© de soutien qui ne peut pas attaquer, mais qui soigne une cible alli√©e unique √† distance.",
        stats: { health: 300, attack: -60, attackSpeed: 1.5, speed: 1.5, range: 5 }, // Attaque n√©gative = Soin
      },
      {
        id: 'card_c_002',
        name: 'Archer de Cendre',
        type: 'unit',
        cost: 2,
        rarity: 'common',
        element: 'fire',
        icon: 'üèπ',
        description: 'Une unit√© √† distance basique, capable de cibler les unit√©s terrestres et a√©riennes.',
        stats: { health: 250, attack: 70, attackSpeed: 1.2, speed: 1.5, range: 5 },
      },
      {
        id: 'card_c_003',
        name: 'Harpie',
        type: 'unit',
        cost: 3,
        rarity: 'common',
        element: 'air',
        icon: 'ü¶Ö',
        description: 'Une unit√© volante rapide et agile, id√©ale pour les attaques √©clairs mais fragile.',
        stats: { health: 200, attack: 60, attackSpeed: 0.8, speed: 2.5, range: 1.5, isFlying: true },
      },
      {
        id: 'card_c_004',
        name: 'Gardien de Granit',
        type: 'unit',
        cost: 4,
        rarity: 'common',
        element: 'earth',
        icon: 'üóø',
        description: "Un tank lent et robuste dot√© d'une capacit√© de Provocation, attirant les attaques des ennemis proches.",
        stats: { health: 1200, attack: 60, attackSpeed: 2.0, speed: 1.0, range: 1, taunt: true },
      },
      {
        id: 'card_c_005',
        name: 'Esprits du Foyer',
        type: 'unit',
        cost: 2,
        rarity: 'common',
        element: 'fire',
        icon: 'üëª',
        description: "D√©ploie 3 petits esprits de feu rapides qui explosent au contact, infligeant des d√©g√¢ts de zone.",
        stats: { health: 150, attack: 80, attackSpeed: 1.0, speed: 3.0, range: 0.5, spawnCount: 3, areaAttack: true },
      },
      {
        id: 'card_c_006',
        name: 'Armure de Pierre',
        type: 'spell',
        cost: 3,
        rarity: 'common',
        element: 'earth',
        icon: 'üõ°Ô∏è',
        description: "Conf√®re un bouclier temporaire de points de vie suppl√©mentaires √† une unit√© alli√©e.",
        effect: { type: 'shield', value: 500, radius: 2.5, target: 'friendly' },
      },
      {
        id: 'card_c_007',
        name: 'Bombe Fumig√®ne',
        type: 'spell',
        cost: 3,
        rarity: 'common',
        element: 'air',
        icon: 'üí®',
        description: "Cr√©e un nuage √©pais qui aveugle les unit√©s ennemies √† l'int√©rieur, les emp√™chant de cibler.",
        effect: { type: 'blind', duration: 4.5, radius: 3 },
      },
      {
        id: 'card_c_008',
        name: 'Rage',
        type: 'spell',
        cost: 3,
        rarity: 'common',
        element: 'fire',
        icon: 'üò°',
        description: "Enflamme une zone, augmentant la vitesse d'attaque et de d√©placement de toutes les unit√©s alli√©es √† l'int√©rieur.",
        effect: { type: 'buff', value: 1.3, duration: 6, radius: 3, target: 'friendly' },
      },
      {
        id: 'card_c_009',
        name: 'Lance-pierre',
        type: 'unit',
        cost: 3,
        rarity: 'common',
        element: 'earth',
        icon: 'ü™®',
        description: 'Une unit√© √† distance qui cible en priorit√© les b√¢timents ennemis.',
        stats: { health: 350, attack: 80, attackSpeed: 2.0, speed: 1.5, range: 6, targetPriority: 'towers' },
      },
      {
        id: 'card_c_010',
        name: 'Initi√©',
        type: 'unit',
        cost: 4,
        rarity: 'common',
        element: 'omni',
        icon: 'üßò',
        description: "Un combattant standard dont l'√©l√©ment Omni lui conf√®re une r√©silience neutre.",
        stats: { health: 550, attack: 90, attackSpeed: 1.5, speed: 1.5, range: 1 },
      },

      // --- CARTES BLEUES (RARES) ---
      {
        id: 'card_r_001',
        name: 'Pyromancien',
        type: 'unit',
        cost: 4,
        rarity: 'rare',
        element: 'fire',
        icon: 'üßô',
        description: "Un magicien du feu qui lance des projectiles explosifs, infligeant des d√©g√¢ts de zone.",
        stats: { health: 400, attack: 90, attackSpeed: 1.8, speed: 1.5, range: 5, areaAttack: true },
      },
      {
        id: 'card_r_002',
        name: 'Archer Z√©phyr',
        type: 'unit',
        cost: 3,
        rarity: 'rare',
        element: 'air',
        icon: 'üçÉ',
        description: "Un archer rapide qui tire des fl√®ches de vent, capable de cibler les unit√©s a√©riennes et terrestres.",
        stats: { health: 300, attack: 80, attackSpeed: 1.1, speed: 2.0, range: 6 },
      },
      {
        id: 'card_r_003',
        name: 'B√©lier de Si√®ge',
        type: 'unit',
        cost: 4,
        rarity: 'rare',
        element: 'earth',
        icon: 'üêè',
        description: "Un engin de si√®ge lent et robuste, sp√©cialis√© dans la destruction des b√¢timents.",
        stats: { health: 1800, attack: 50, attackBuildingBonus: 300, attackSpeed: 2.5, speed: 1.0, range: 1, targetPriority: 'towers' },
      },
      {
        id: 'card_r_004',
        name: 'Ondine Gu√©risseuse',
        type: 'unit',
        cost: 4,
        rarity: 'rare',
        element: 'water',
        icon: 'üíß',
        description: "Une nymphe aquatique qui ne peut pas attaquer, mais soigne les alli√©s proches gr√¢ce √† son aura bienfaisante.",
        stats: { health: 600, attack: -40, attackSpeed: 1.0, speed: 1.5, range: 4, areaHeal: true }, // Aura de soin
      },
      {
        id: 'card_r_005',
        name: 'Chevalier Incandescent',
        type: 'unit',
        cost: 4,
        rarity: 'rare',
        element: 'fire',
        icon: '‚öîÔ∏è',
        description: "Un chevalier ardent dont les attaques enflamment ses adversaires, leur infligeant des d√©g√¢ts de br√ªlure.",
        stats: { health: 1100, attack: 100, attackSpeed: 1.6, speed: 1.5, range: 1, dot: { type: 'burn', damage: 20, duration: 5 } },
      },
      {
        id: 'card_r_006',
        name: 'Assassin Ail√©',
        type: 'unit',
        cost: 4,
        rarity: 'rare',
        element: 'air',
        icon: 'ü¶á',
        description: "Une unit√© volante qui ignore les autres unit√©s et se dirige directement vers la tour ennemie la plus proche.",
        stats: { health: 700, attack: 120, attackSpeed: 1.4, speed: 2.0, range: 1.5, isFlying: true, targetPriority: 'towers' },
      },
      {
        id: 'card_r_007',
        name: 'Mur de Piques',
        type: 'building',
        cost: 3,
        rarity: 'rare',
        element: 'earth',
        icon: 'üåµ',
        description: "Un mur d√©fensif h√©riss√© de piques, infligeant des d√©g√¢ts de riposte aux unit√©s qui l'attaquent en m√™l√©e.",
        stats: { health: 1000, attack: 50, attackSpeed: 0, speed: 0, range: 0, duration: 40, isThorns: true },
      },
      {
        id: 'card_r_008',
        name: 'Kraken Juv√©nile',
        type: 'unit',
        cost: 5,
        rarity: 'rare',
        element: 'water',
        icon: 'üêô',
        description: "Un jeune monstre marin dont les attaques agrippent une unit√© ennemie et la tirent vers lui.",
        stats: { health: 900, attack: 160, attackSpeed: 1.8, speed: 1.2, range: 3.5, isPull: true },
      },
      {
        id: 'card_r_009',
        name: 'Vague de Choc',
        type: 'spell',
        cost: 4,
        rarity: 'rare',
        element: 'omni',
        icon: 'üåä',
        description: "Une puissante vague qui inflige des d√©g√¢ts √† toutes les unit√©s (sauf b√¢timents) sur la carte et les repousse.",
        effect: { type: 'damage', value: 150, radius: 100, knockback: 3, target: 'all-units' },
      },
      {
        id: 'card_r_010',
        name: 'Pluie Gu√©risseuse',
        type: 'spell',
        cost: 3,
        rarity: 'rare',
        element: 'water',
        icon: 'üåßÔ∏è',
        description: "Un sort qui d√©clenche une pluie apaisante, soignant l√©g√®rement toutes les unit√©s alli√©es dans une zone sur la dur√©e.",
        effect: { type: 'heal_over_time', value: 300, duration: 5, radius: 3.5, target: 'friendly' },
      },
      {
        id: 'card_r_011',
        name: 'Cyclone',
        type: 'spell',
        cost: 3,
        rarity: 'rare',
        element: 'air',
        icon: 'üå™Ô∏è',
        description: "Cr√©e un tourbillon qui attire lentement toutes les unit√©s (amies et ennemies) vers son centre pendant 3 secondes.",
        effect: { type: 'pull', duration: 3, radius: 3.5 },
      },
      {
        id: 'card_r_012',
        name: 'Fissure',
        type: 'spell',
        cost: 4,
        rarity: 'rare',
        element: 'earth',
        icon: 'üèúÔ∏è',
        description: "Ouvre une crevasse infranchissable sur le terrain pendant 10 secondes, bloquant le passage des unit√©s terrestres.",
        effect: { type: 'obstacle', duration: 10, radius: 4 },
      },
      {
        id: 'card_r_013',
        name: 'Meute de Chiens de Lave',
        type: 'unit',
        cost: 3,
        rarity: 'rare',
        element: 'fire',
        icon: 'üêï',
        description: "Une meute de 3 chiens de lave rapides et agiles, id√©aux pour submerger l'ennemi.",
        stats: { health: 180, attack: 70, attackSpeed: 1.3, speed: 2.5, range: 1, spawnCount: 3 },
      },
      {
        id: 'card_r_014',
        name: 'Prisme Lumineux',
        type: 'building',
        cost: 4,
        rarity: 'rare',
        element: 'omni',
        icon: 'üí°',
        description: "Un b√¢timent qui √©met une aura, augmentant l√©g√®rement les d√©g√¢ts de toutes les unit√©s alli√©es √† proximit√©.",
        stats: { health: 600, attack: 0, attackSpeed: 0, speed: 0, range: 5, duration: 40, isBuff: true, buffValue: 1.15 },
      },
      {
        id: 'card_r_015',
        name: 'Bourrasque',
        type: 'spell',
        cost: 2,
        rarity: 'rare',
        element: 'air',
        icon: 'üí®',
        description: "Repousse les ennemis dans un c√¥ne devant votre tour. Un sort purement d√©fensif.",
        effect: { type: 'knockback', value: 4, radius: 3, shape: 'cone' },
      },
      {
        id: 'card_r_016',
        name: 'Catapulte',
        type: 'building',
        cost: 5,
        rarity: 'rare',
        element: 'earth',
        icon: 'üéØ',
        description: "Un b√¢timent √† longue port√©e qui lance des rochers enflamm√©s, infligeant des d√©g√¢ts de zone.",
        stats: { health: 800, attack: 150, attackSpeed: 3.5, speed: 0, range: 10, areaAttack: true },
      },
      {
        id: 'card_r_017',
        name: 'Prison Aqueuse',
        type: 'spell',
        cost: 4,
        rarity: 'rare',
        element: 'water',
        icon: 'üíß',
        description: "Enveloppe une unit√© ennemie (sauf b√¢timent) dans une bulle d'eau, l'√©tourdissant pendant 4s.",
        effect: { type: 'stun', duration: 4, radius: 1.5 },
      },
      {
        id: 'card_r_018',
        name: 'Mar√©cage',
        type: 'spell',
        cost: 4,
        rarity: 'rare',
        element: 'water',
        icon: 'Îä™',
        description: "Cr√©e une zone de mar√©cage qui ralentit fortement les unit√©s terrestres ennemies et leur inflige de l√©gers d√©g√¢ts.",
        effect: { type: 'slow', value: 0.4, duration: 7, radius: 3.5, dot: { damage: 20, duration: 7 } },
      },

      // --- CARTES VIOLETTES (√âPIQUES) ---
      {
        id: 'card_e_001',
        name: 'Golem de Magma',
        type: 'unit',
        cost: 6,
        rarity: 'epic',
        element: 'fire',
        icon: 'üåã',
        description: "Un g√©ant de roche en fusion. Tr√®s lent, il laisse derri√®re lui une tra√Æn√©e de lave ardente qui blesse.",
        stats: { health: 2000, attack: 180, attackSpeed: 2.2, speed: 0.8, range: 1.5, trail: { damage: 30, duration: 3 } },
      },
      {
        id: 'card_e_002',
        name: 'Temp√™te',
        type: 'spell',
        cost: 5,
        rarity: 'epic',
        element: 'air',
        icon: 'üå©Ô∏è',
        description: "Une violente temp√™te qui inflige des d√©g√¢ts √† toutes les unit√©s (air et sol) et les repousse al√©atoirement.",
        effect: { type: 'damage', value: 200, radius: 4, knockback: 1.5 },
      },
      {
        id: 'card_e_003',
        name: 'Vortex',
        type: 'spell',
        cost: 4,
        rarity: 'epic',
        element: 'omni',
        icon: 'üåÄ',
        description: "G√©n√®re une violente temp√™te qui attire toutes les unit√©s dans une zone, puis les projette au hasard.",
        effect: { type: 'scramble', duration: 3, radius: 3.5 },
      },
      {
        id: 'card_e_004',
        name: 'Barri√®re de Glace',
        type: 'building',
        cost: 4,
        rarity: 'epic',
        element: 'water',
        icon: 'üßä',
        description: "Un mur d√©fensif qui fond lentement mais g√®le instantan√©ment les unit√©s ennemies qui l'attaquent en m√™l√©e.",
        stats: { health: 900, attack: 0, attackSpeed: 0, speed: 0, range: 1, duration: 50, isFreezeThorns: true },
      },
      {
        id: 'card_e_005',
        name: 'Ombre Rampante',
        type: 'unit',
        cost: 3,
        rarity: 'epic',
        element: 'void',
        icon: 'üë•',
        description: "Une cr√©ature invisible qui ne peut √™tre cibl√©e avant sa premi√®re attaque. Sa premi√®re frappe inflige des d√©g√¢ts doubl√©s.",
        stats: { health: 300, attack: 100, attackSpeed: 1.0, speed: 2.0, range: 1, isInvisible: true, isFirstStrike: true },
      },
      {
        id: 'card_e_006',
        name: 'D√©voreur',
        type: 'unit',
        cost: 5,
        rarity: 'epic',
        element: 'void',
        icon: 'üëø',
        description: "Un pr√©dateur des ombres dot√© de la capacit√© 'Ex√©cution', qui tue instantan√©ment les unit√©s sous 15% de PV.",
        stats: { health: 900, attack: 160, attackSpeed: 1.7, speed: 1.8, range: 1, execute: 0.15 },
      },
      {
        id: 'card_e_007',
        name: 'Volcan',
        type: 'building',
        cost: 5,
        rarity: 'epic',
        element: 'fire',
        icon: 'üåã',
        description: "Un b√¢timent dormant qui entre en √©ruption apr√®s 10s, infligeant des d√©g√¢ts de zone et g√©n√©rant 2 Esprits du Foyer.",
        stats: { health: 1200, attack: 300, attackSpeed: 10, speed: 0, range: 5, areaAttack: true, spawnOnDeath: { id: 'card_c_005', count: 2 } },
      },
      {
        id: 'card_e_008',
        name: 'Ph√©nix Juv√©nile',
        type: 'unit',
        cost: 4,
        rarity: 'epic',
        element: 'fire',
        icon: 'üê¶',
        description: "√Ä sa mort, il rena√Æt une fois sous forme d'≈íuf. S'il survit 3s, il √©clot avec 50% de ses PV.",
        stats: { health: 700, attack: 80, attackSpeed: 1.4, speed: 2.0, range: 4, isFlying: true, isRebirth: true },
      },
      {
        id: 'card_e_009',
        name: 'Sentinelle Arc-en-ciel',
        type: 'unit',
        cost: 4,
        rarity: 'epic',
        element: 'omni',
        icon: 'üåà',
        description: "Une unit√© √† distance qui adapte son attaque pour exploiter la faiblesse √©l√©mentaire de sa cible.",
        stats: { health: 500, attack: 80, attackSpeed: 1.5, speed: 1.5, range: 5, isAdaptive: true },
      },
      {
        id: 'card_e_010',
        name: 'Silence',
        type: 'spell',
        cost: 4,
        rarity: 'epic',
        element: 'void',
        icon: 'ü§´',
        description: "Cr√©e une zone o√π les unit√©s ennemies sont r√©duites au silence, les emp√ächant d'utiliser leurs capacit√©s.",
        effect: { type: 'silence', duration: 6, radius: 3.5 },
      },
      {
        id: 'card_e_011',
        name: 'Miroir',
        type: 'spell',
        cost: 1, // Co√ªt = +1
        rarity: 'epic',
        element: 'omni',
        icon: 'ü™û',
        description: "Cr√©e une copie (Niv 1) d'une unit√© alli√©e. La copie n'a qu'un point de vie. Co√ªte +1 √ânergie que la carte copi√©e.",
        effect: { type: 'clone', level: 1, costBonus: 1 },
      },
      {
        id: 'card_e_012',
        name: 'Touche du Vide',
        type: 'spell',
        cost: 2,
        rarity: 'epic',
        element: 'void',
        icon: 'üíÄ',
        description: 'Inflige 30 d√©g√¢ts et applique "Famine" (la cible ne peut √™tre soign√©e) pendant 3 secondes.',
        effect: { type: 'damage', value: 30, radius: 1.5, isAntiHeal: true, duration: 3 },
      },
      {
        id: 'card_e_013',
        name: 'Parasite',
        type: 'spell',
        cost: 3,
        rarity: 'epic',
        element: 'void',
        icon: 'ü¶†',
        description: "S'attache √† une unit√© ennemie, d√©tournant 50% de tous les soins qu'elle re√Åoit pour soigner vos unit√©s.",
        effect: { type: 'leech_heal', value: 0.5, duration: 10, radius: 1.5 },
      },
      {
        id: 'card_e_014',
        name: 'Siphon d\'√ânergie',
        type: 'spell',
        cost: 2,
        rarity: 'epic',
        element: 'void',
        icon: '‚ö°',
        description: "Inflige 50 d√©g√¢ts √† une unit√©. Si cette unit√© meurt dans les 2 secondes, vous gagnez +1 √ânergie.",
        effect: { type: 'damage', value: 50, radius: 0.5, isEnergySteal: true, duration: 2 },
      },
      {
        id: 'card_e_015',
        name: 'Nuage Toxique',
        type: 'spell',
        cost: 5,
        rarity: 'epic',
        element: 'air',
        icon: 'ü§¢',
        description: "Cr√©e un nuage persistant qui inflige des d√©g√¢ts sur la dur√©e, particuli√®rement efficace contre les unit√©s terrestres.",
        effect: { type: 'dot', value: 40, duration: 7, radius: 3.5 },
      },
      {
        id: 'card_e_016',
        name: 'Gel',
        type: 'spell',
        cost: 4,
        rarity: 'epic',
        element: 'water',
        icon: '‚ùÑÔ∏è',
        description: "Cr√©e une zone de froid intense qui ralentit consid√©rablement la vitesse de d√©placement et d'attaque des unit√©s ennemies.",
        effect: { type: 'freeze', duration: 4, radius: 3.5 }, // Freeze = slow 60%
      },
      {
        id: 'card_e_017',
        name: 'Tremblor',
        type: 'spell',
        cost: 4,
        rarity: 'epic',
        element: 'earth',
        icon: 'üåç',
        description: "Provoque un tremblement de terre qui inflige de faibles d√©g√¢ts √† toutes les unit√©s terrestres et les ralentit.",
        effect: { type: 'damage', value: 100, radius: 4, isGroundOnly: true, isSlow: true, duration: 3 },
      },

      // --- CARTES DOR√âES (L√âGENDAIRES) ---
      {
        id: 'card_l_001',
        name: 'Titan Sismique',
        type: 'unit',
        cost: 8,
        rarity: 'legendary',
        element: 'earth',
        icon: 'üèãÔ∏è',
        description: "Un colosse in√©branlable qui ne peut √™tre repouss√©. Chaque troisi√®me attaque, il frappe le sol et √©tourdit.",
        stats: { health: 3500, attack: 250, attackSpeed: 2.5, speed: 1.0, range: 1.5, areaAttack: true, isUnstoppable: true, isStunAttack: 3 },
      },
      {
        id: 'card_l_002',
        name: 'L\'Architecte',
        type: 'unit',
        cost: 6,
        rarity: 'legendary',
        element: 'omni',
        icon: 'üìê',
        description: "Son d√©ploiement offre un choix tactique : gagner de l'√©nergie, piocher des cartes, ou √©tourdir les ennemis proches.",
        stats: { health: 1300, attack: 60, attackSpeed: 2.0, speed: 1.5, range: 4, isChoice: true },
      },
      {
        id: 'card_l_003',
        name: 'Djinn des Temp√™tes',
        type: 'unit',
        cost: 6,
        rarity: 'legendary',
        element: 'air',
        icon: 'üßû',
        description: "Un esprit a√©rien invoquant l'orage. Ses attaques d'√©clair rebondissent entre les ennemis.",
        stats: { health: 1200, attack: 150, attackSpeed: 1.8, speed: 2.0, range: 5, isFlying: true, isChainAttack: 3 },
      },
      {
        id: 'card_l_004',
        name: 'L√©viathan',
        type: 'unit',
        cost: 7,
        rarity: 'legendary',
        element: 'water',
        icon: 'üê≥',
        description: "Une b√™te aquatique colossale qui ne peut √™tre jou√©e que sur le pont. Ne peut √™tre repouss√©e. Balaye les ennemis.",
        stats: { health: 3200, attack: 220, attackSpeed: 2.0, speed: 1.2, range: 1.8, areaAttack: true, isUnstoppable: true, isBridgeOnly: true },
      },
      {
        id: 'card_l_005',
        name: 'Ga√Øa, C≈ìur du Monde',
        type: 'building',
        cost: 7,
        rarity: 'legendary',
        element: 'earth',
        icon: 'üå≥',
        description: "Ce b√¢timent inattaquable par les sorts soigne passivement toutes vos structures sur le champ de bataille.",
        stats: { health: 2500, attack: -25, attackSpeed: 1.0, speed: 0, range: 100, isSpellProof: true, isGlobalHeal: true },
      },
      {
        id: 'card_l_006',
        name: 'Ifrit, le Sultan des Flammes',
        type: 'unit',
        cost: 7,
        rarity: 'legendary',
        element: 'fire',
        icon: 'üëπ',
        description: "Son aura inflige des d√©g√¢ts constants et r√©duit le co√ªt des sorts de Feu alli√©s proches de 1.",
        stats: { health: 1400, attack: 200, attackSpeed: 1.2, speed: 1.5, range: 1.5, areaDamageAura: 40, isDiscountAura: { element: 'fire', cost: 1 } },
      },
      {
        id: 'card_l_007',
        name: 'Le Roi des Vents',
        type: 'unit',
        cost: 7,
        rarity: 'legendary',
        element: 'air',
        icon: 'üëë',
        description: "Ses alli√©s de l'Air gagnent en vitesse. Il peut se t√©l√©porter n'importe o√π pour 1 √ânergie.",
        stats: { health: 1200, attack: 150, attackSpeed: 1.4, speed: 2.0, range: 5, isFlying: true, isBuffAura: { element: 'air', speed: 1.2 }, isTeleport: true },
      },
      {
        id: 'card_l_008',
        name: 'La M√®re des Oc√©ans',
        type: 'unit',
        cost: 9,
        rarity: 'legendary',
        element: 'water',
        icon: 'üåä',
        description: "Son d√©ploiement d√©clenche un Tsunami qui repousse toutes les unit√©s terrestres ennemies jusqu'√† leur tour.",
        stats: { health: 2800, attack: 180, attackSpeed: 1.8, speed: 1.5, range: 4, areaAttack: true, onDeploy: { type: 'global_knockback' } },
      },
      {
        id: 'card_l_009',
        name: 'Le Pentarque',
        type: 'unit',
        cost: 8,
        rarity: 'legendary',
        element: 'omni',
        icon: '‚≠ê',
        description: "Aura : Les alli√©s proches partagent leurs r√©sistances √©l√©mentaires, cr√©ant une d√©fense unifi√©e.",
        stats: { health: 2400, attack: 100, attackSpeed: 2.0, speed: 1.2, range: 1.5, isShareResistanceAura: true },
      },
      {
        id: 'card_l_010',
        name: 'Trou Noir',
        type: 'spell',
        cost: 6,
        rarity: 'legendary',
        element: 'void',
        icon: '‚ö´',
        description: "Une singularit√© qui attire violemment toutes les unit√©s vers son centre et les √©tourdit.",
        effect: { type: 'pull', duration: 2, radius: 4, isStun: true },
      },

      // --- CARTES ROUGES (MYTHIQUES) ---
      {
        id: 'card_m_001',
        name: 'Avatar des √âl√©ments',
        type: 'unit',
        cost: 9,
        rarity: 'mythic',
        element: 'alliance',
        icon: 'üî•',
        description: "Ne peut √™tre invoqu√© qu'en sacrifiant une unit√© de chaque √©l√©ment sur le terrain, gagnant leur puissance.",
        stats: { health: 4000, attack: 300, attackSpeed: 2.0, speed: 1.8, range: 2, areaAttack: true, isSacrifice: true },
      },
      {
        id: 'card_m_002',
        name: 'Ouroboros, le D√©voreur',
        type: 'unit',
        cost: 9,
        rarity: 'mythic',
        element: 'void',
        icon: 'üêç',
        description: "Son d√©ploiement draine temporairement l'√©nergie des deux joueurs, plongeant le combat dans le chaos.",
        stats: { health: 4200, attack: 300, attackSpeed: 2.2, speed: 1.5, range: 1.5, onDeploy: { type: 'energy_drain', duration: 5 } },
      },
      {
        id: 'card_m_003',
        name: 'Gen√®se',
        type: 'spell',
        cost: 10,
        rarity: 'mythic',
        element: 'omni',
        icon: 'üåå',
        description: "Un sort qui r√©initialise compl√®tement le champ de bataille, ramenant les joueurs √† un √©tat d'√©quilibre fragile.",
        effect: { type: 'reset_field', value: 5 }, // Remet l'√©nergie √† 5
      },
      {
        id: 'card_m_004',
        name: 'Pluie de M√©t√©ores',
        type: 'spell',
        cost: 8,
        rarity: 'mythic',
        element: 'fire',
        icon: '‚òÑÔ∏è',
        description: "Invoque une pluie de roches enflamm√©es qui s'√©crasent al√©atoirement dans une large zone.",
        effect: { type: 'damage', value: 350, radius: 4, isMeteor: true, count: 3 },
      },
      {
        id: 'card_m_005',
        name: 'Golem d\'Harmonie',
        type: 'unit',
        cost: 7,
        rarity: 'mythic',
        element: 'omni',
        icon: '‚òØÔ∏è',
        description: "Une entit√© primordiale qui change d'√©l√©ment (Feu, Eau, Air, Terre) toutes les 5 secondes.",
        stats: { health: 2800, attack: 180, attackSpeed: 1.5, speed: 1.2, range: 1.5, isShapeshifter: true },
      },
    ];
  }

  getCardById(id) {
    const card = this.cards.find(card => card.id === id);
    if (!card) console.warn(`Carte non trouv√©e avec ID: ${id}`);
    return card;
  }

  // Cr√©e un deck de d√©part pour le joueur
  createStarterDeck() {
    // ‚úÖ MODIFI√â : Renvoie 6 cartes de d√©part au lieu de 8
    return [
      'card_b_002', // Soldat du Brasier
      'card_b_004', // Golem d'Argile
      'card_b_005', // Flamm√®che
      'card_c_002', // Archer de Cendre
      'card_c_003', // Harpie
      'card_r_001', // Pyromancien
    ];
  }

  /**
   * Calcule le co√ªt en OR pour am√©liorer.
   */
  getUpgradeCost(cardId, currentLevel) {
    const card = this.getCardById(cardId);
    if (!card) return null;
    
    const costs = this.upgradeCosts[card.rarity];
    if (!costs) return null;

    const costIndex = currentLevel - 1; 
    if (costIndex < costs.length) {
      return costs[costIndex];
    }
    return null; // Niveau maximum
  }
  
  /**
   * Calcule le nombre de CARTES requises pour am√©liorer.
   */
  getUpgradeCardCount(rarity, currentLevel) {
    const counts = this.upgradeCardCounts[rarity];
    if (!counts) return 0;
    
    const countIndex = currentLevel - 1;
    if (countIndex < counts.length) {
      return counts[countIndex];
    }
    return 999; // Niveau max
  }
}

export default CardDatabase;